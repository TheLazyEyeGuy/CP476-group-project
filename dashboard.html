<html>
    <body onload="loadDoc()">
    </body>

    <script>
        // Convert string to 2D array of coins, favCoinNames, favCoins, price, loggedIn
        function processString(str) {
            const temp =  str.split(":");
            
            const coins = temp[0].split(",");
            const favCoinNames = temp[1].split(",");
            const favCoins = temp[2].split(",");
            const price = temp[3].split(",");
            var loggedIn = temp[4];

            const processed = [coins, favCoinNames, favCoins, price, loggedIn];
            return processed;
        }

        function createForm(processed) {
            const coins = processed[0];
            const favCoinNames = processed[1];
            const favCoins = processed[2];
            const price = processed[3];
            var loggedIn = processed[4];

            for (i = 0; i < favCoins.length; i++) {
                var div = document.createElement("div");
                div.setAttribute("id", "div" + i);

                div.innerHTML = favCoinNames[i] + " - " + favCoins[i] + " : " + price[i];
                document.getElementsByTagName("body")[0].appendChild(div);

            }
        }

        // Runs on retreival of string using AJAX
        // String contains: coins, price, favStock
        function loadDoc() {
            // Form AJAX request
            const request = new XMLHttpRequest();

            // Run function after receiving answer
            request.onload = function() {
                processed = processString(this.responseText);
                createForm(processed);
            }

            request.open("POST", "get_coins.php", true);
            request.send();
        }

    </script>
</html>